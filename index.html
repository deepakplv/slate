<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Plivo Internal APIs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;JSON Response&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="JSON Response">JSON Response</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><span class="copyright">Â© 2017 Plivo Inc.</span></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>These are some internal APIs used at Plivo.</p>

<p>You can view JSON response samples in the dark area to the right.</p>

<h2 id="authentication">Authentication</h2>

<p>All requests to Plivo API are authenticated with Basic Auth using the account/subaccount AUTH ID and AUTH TOKEN visible at the <a href="https://manage.plivo.com/dashboard/">dashboard</a>.
<img src="images/auth_id_auth_token.png" alt="Auth id auth token" /></p>

<h2 id="api-response-status">API Response Status</h2>

<p>APIs return one of the following HTTP status codes.</p>

<table>
    <thead>
        <tr>
            <th>Status Code</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>200</td>
            <td>Request has been executed</td>
        </tr>
        <tr>
            <td>201</td>
            <td>Resource created</td>
        </tr>
        <tr>
            <td>202</td>
            <td>Resource changed</td>
        </tr>
        <tr>
            <td>204</td>
            <td>Resource deleted</td>
        </tr>
        <tr>
            <td>400</td>
            <td>A parameter is missing or is invalid</td>
        </tr>
        <tr>
            <td>401</td>
            <td>Authentication failed</td>
        </tr>
        <tr>
            <td>404</td>
            <td>Resource cannot be found</td>
        </tr>
        <tr>
            <td>405</td>
            <td>HTTP method not allowed</td>
        </tr>
        <tr>
            <td>500</td>
            <td>Server error</td>
        </tr>
    </tbody>
</table>

<h1 id="number-amp-phonenumber-internal-apis">Number &amp; PhoneNumber Internal APIs</h1>

<p>The following actions can be performed using the Number/PhoneNumber internal APIs.</p>

<h2 id="add-number-to-inventory">Add number to Inventory</h2>

<blockquote>
<p>Success</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Number 0123456789 has been added successfully to the inventory"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Failure</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Exception while saving Number 0123456789 to Phone Inventory"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error Message"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API lets adding a number to Plivo Phone Inventory.</p>

<p><code class="prettyprint">POST /api/v1/AddPhoneNumber/</code></p>

<p><a href="https://github.com/plivo/plivocloud/blob/cb70493cd1452f7dc22b97a5dc5620cb29aa661c/plivo_cloud/plivo_api/internal_api.py#L2374">Source</a></p>

<h3 id="arguments">Arguments</h3>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>number</td>
            <td>The number to be added</td>
        </tr>
        <tr>
            <td>number_type</td>
            <td>This field may be used to categorize between local and tollfree numbers. Default is local.</td>
        </tr>
        <tr>
            <td>sms_enabled</td>
            <td>Boolean to denote if number is sms enabled</td>
        </tr>
        <tr>
            <td>rented_from_carrier</td>
            <td>Rented from carrier date</td>
        </tr>
        <tr>
            <td>rate_center</td>
            <td>Rate Center</td>
        </tr>
        <tr>
            <td>lata</td>
            <td>Numbers can be searched using <a href="http://en.wikipedia.org/wiki/Local_access_and_transport_area">Local Access and Transport Area</a>. This filter is applicable only for <code>country_iso</code> US and CA.</td>
        </tr>
        <tr>
            <td>prefix</td>
            <td>This is the area code of the number.</td>
        </tr>
        <tr>
            <td>state</td>
            <td>Region&rsquo;s state.</td>
        </tr>
    </tbody>
</table>

<h2 id="check-source-number">Check Source Number</h2>

<blockquote>
<p>Success 200</p>

<p>Failure 404</p>
</blockquote>

<p>This API lets check if source number is present in the account.</p>

<p><code class="prettyprint">GET /api/v1/Internal/Account/{AUTH_ID}/NumberCheck/{SOURCE_NUMBER}/</code></p>

<p><a href="https://github.com/plivo/plivocloud/blob/cb70493cd1452f7dc22b97a5dc5620cb29aa661c/plivo_cloud/plivo_api/internal_api.py#L983">Source</a></p>

<h3 id="arguments">Arguments</h3>

<p>None</p>

<h2 id="get-sandbox-numbers">Get Sandbox Numbers</h2>

<blockquote>
<p>Success 200</p>
</blockquote>
<pre class="highlight plaintext"><code>[
  "919123456789",
  "919123456790"
]
</code></pre>
<blockquote>
<p>Failure 404</p>
</blockquote>

<p>This API shows sandbox numbers for the account.</p>

<p><code class="prettyprint">GET /api/v1/Internal/Account/{AUTH_ID}/SandboxNumbers/</code></p>

<p><a href="https://github.com/plivo/plivocloud/blob/cb70493cd1452f7dc22b97a5dc5620cb29aa661c/plivo_cloud/plivo_api/internal_api.py#L997">Source</a></p>

<h3 id="arguments">Arguments</h3>

<p>None</p>

<h2 id="add-numbers-to-inventory">Add numbers to Inventory</h2>

<blockquote>
<p>Success</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The numbers have been added to the inventory"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[0123456789, 1234567890]"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Failure</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failure"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Phone number 0123456789 could not be added"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API lets adding a list of numbers to Plivo Phone Inventory.</p>

<p><code class="prettyprint">POST /api/v1/Internal/Number/</code></p>

<p><a href="https://github.com/plivo/plivocloud/blob/cb70493cd1452f7dc22b97a5dc5620cb29aa661c/plivo_cloud/plivo_api/add_numbers_to_inventory.py#L35">Source</a></p>

<h3 id="arguments">Arguments</h3>

<p>A JSON of parameters are accepted.
<table>
    <thead>
        <tr>
            <th>JSON Parameters</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>numbers</td>
            <td>List of numbers to be added</td>
        </tr>
        <tr>
            <td>carrier_id</td>
            <td>The ID of the carrier which is linked to these numbers. This can either be a Plivo carrier or a custom carrier added using the IncomingCarrier API.</td>
        </tr>
        <tr>
            <td>tier</td>
            <td>Incoming Carrier Tier</td>
        </tr>
        <tr>
            <td>number_type</td>
            <td>This field may be used to categorize between local and tollfree numbers. Default is local.</td>
        </tr>
        <tr>
            <td>product_plan</td>
            <td>Product Plan name to be offered to market</td>
        </tr>
        <tr>
            <td>voice_enabled</td>
            <td>Boolean to denote if numbers are voice enabled</td>
        </tr>
        <tr>
            <td>sms_enabled</td>
            <td>Boolean to denote if numbers are sms enabled</td>
        </tr>
        <tr>
            <td>region_id</td>
            <td>The ID of region, with the city and the country these numbers belongs to.</td>
        </tr>
        <tr>
            <td>rate_center</td>
            <td>Rate Center</td>
        </tr>
        <tr>
            <td>lata</td>
            <td>Numbers can be searched using <a href="http://en.wikipedia.org/wiki/Local_access_and_transport_area">Local Access and Transport Area</a>. This filter is applicable only for <code>country_iso</code> US and CA.</td>
        </tr>
        <tr>
            <td>username</td>
            <td>Account&rsquo;s username(from User table)</td>
        </tr>
    </tbody>
</table></p>

<h1 id="account-credit-apis">Account Credit APIs</h1>

<p>BaseURI: <code class="prettyprint">/balanceservice/v1/balance/{account_identifier}</code></p>

<p>This service is primarily responsible for maintaining balances.
Events will be triggered for each create or update activity. These events can be used by other services for audit trail or balance recharge .
There will be no balance expiry and different service will be responsible for refilling balance.
When balances are migrated from one type to other, old balance will be expired and new balance will be created.
At any point of time we will assume that there will be just one active or suspended balance.</p>

<h2 id="authentication">Authentication</h2>

<p>Each API request need to have auth_id and auth_token for basic digest authentication.</p>

<blockquote>
<p>Authentication Failure Http Status Code: 403</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="common-response-format">Common Response Format</h2>

<p>Each Response will have common format.</p>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>status </td>
            <td>Status of the request. It can have three values <code>success</code>, <code>fail</code> or <code>error<code>
            </td>
        </tr>
        <tr>
            <td>data</td>
            <td>In case of <code>success</code> status this field will be present with balance object
            </td>
        </tr>
        <tr>
            <td>message</td>
            <td>In case of <code>error</code> or <code>fail</code> status, this field will be present with appropriate message.
            </td>
        </tr>

    </tbody>
</table>

<h2 id="balance-object-description">Balance object description</h2>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>balance_tag </td>
            <td>string</td>
            <td>Balance can be tagged. Preferably by prepaid or postpaid tags. Length Limit(1-50). Greater length will
            be trimmed
            </td>
        </tr>
        <tr>
            <td>amount</td>
            <td>decimal</td>
            <td>Balance amount
            </td>
        </tr>
        <tr>
            <td>topup_amount</td>
            <td>decimal</td>
            <td>If account balance goes below threshold limit account, an event will be triggered for low balance and
            topup amount will be sent in event detail.
            </td>
        </tr>
        <tr>
            <td>threshold_amount</td>
            <td>decimal</td>
            <td>if balance amount goes below threshold amount event will be triggered for low balance
            </td>
        </tr>
        <tr>
            <td>created</td>
            <td>string</td>
            <td>created time of balance
            </td>
        </tr>
        <tr>
            <td>modified</td>
            <td>string</td>
            <td>time when balance was last modified
            </td>
        </tr>
        <tr>
            <td>status</td>
            <td>string</td>
            <td>status of the account balance. Possible values are <code>active</code> Current Active balance.<code>deleted</code> Balance has been deleted.
            <code>suspended</code> Balance has been suspended temporarily. For an account we expect only one balance to be in active or suspended state.
            </td>
        </tr>
        <tr>
            <td>account_identifier</td>
            <td>string</td>
            <td> Will be used to uniquely identify account.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="get-active-balance">Get Active Balance</h2>

<blockquote>
<p>HTTP Status Code: 200</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"balance_tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prepaid"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3456.56</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topup_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"threshold_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383249</span><span class="p">,</span><span class="w">
            </span><span class="nt">"modified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383290</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 400</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account identifier is missing"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code:410</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no active balance available"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API fetches active balance for given account</p>

<p><code class="prettyprint">GET /balanceservice/v1/balance/{account_identifier}/</code></p>

<h3 id="response-attributes">Response Attributes</h3>

<dl>
    <dt>balance_tag</dt>
    <dd>string
    <span> balance tag.
    </dd>

    <dt>amount</dt>
    <dd>decimal
    <span>balance amount</span>
    </dd>

    <dt>status</dt>
    <dd>string
    <span>status of balance.
    </dd>

    <dt>created</dt>
    <dd>string
    <span>creation time of balance</span>
    </dd>

    <dt>modified</dt>
    <dd>string
    <span>modified time of balance</span>
    </dd>

    <dt>topup_amount</dt>
    <dd>decimal
    <span>in case of low balance event this topup amount will be sent out in event </span>
    </dd>
    <dt>threshold_amount</dt>
    <dd>decimal
    <span>if balance goes below threshold amount, an event will be triggered for low balance</span>
    </dd>
    <dt>account_identifier</dt>
    <dd>string
    <span>Uniquely identifies the account </span>
    </dd>
</dl>

<h2 id="get-other-balances">Get Other Balances</h2>

<blockquote>
<p>HTTP Status Code: 200</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"account_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
            </span><span class="nt">"balance_tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prepaid"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3456.56</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topup_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
            </span><span class="nt">"threshold_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deleted"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383249</span><span class="p">,</span><span class="w">
            </span><span class="nt">"modified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383290</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
            </span><span class="nt">"balance_tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postpaid"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3456.56</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topup_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"threshold_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deleted"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383249</span><span class="p">,</span><span class="w">
            </span><span class="nt">"modified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383290</span><span class="p">},</span><span class="w">
        </span><span class="p">]</span><span class="w">
     </span><span class="p">}</span><span class="w">


</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 400</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account identifier is missing"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API fetches deleted or suspended balances for given account</p>

<p><code class="prettyprint">GET /balanceservice/v1/balance/{account_identifier};{status}</code></p>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>status</td>
            <td> status could be of type <code>deleted</code> or <code>suspended</code>
            </td>
        </tr>
    </tbody>
</table>

<h3 id="response-attributes">Response Attributes</h3>

<dl>
    <dt>balance_tag</dt>
    <dd>string
    <span>tag of balance
    </dd>

    <dt>amount</dt>
    <dd>decimal
    <span>balance amount</span>
    </dd>

    <dt>status</dt>
    <dd>string
    <span>status of balance.
    </dd>

    <dt>created</dt>
    <dd>string
    <span>creation time of balance</span>
    </dd>

    <dt>modified</dt>
    <dd>string
    <span>modified time of balance</span>
    </dd>

    <dt>topup_amount</dt>
    <dd>decimal
    <span>topup amount to be used for low balance event. </span>
    </dd>
    <dt>threshold_amount</dt>
    <dd>decimal
    <span>if balance goes below threshold amount event will be triggered for low balance</span>
    </dd>

</dl>

<h2 id="update-balance">Update Balance</h2>

<blockquote>
<p>HTTP Status Code: 200</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">334.56</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 200 (insufficient balance)</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account does not have sufficient balance"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>HTTP Status Code: 400</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account is supended"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API updates balance of a account.</p>

<p><code class="prettyprint">POST /balanceservice/v1/balance/{account_identifier}/</code></p>

<h3 id="arguments">Arguments</h3>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>amount (mandatory)</td>
            <td>amount that need to be updated in active balance. In case of positive value balance will be credited else in case of negative value balance will be debited
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>meta (optional)</td>
            <td> meta information could be sent which will be forwarded to event call back. Meta will be a dict with three fields.
            All fields have length restriction. If violated meta info will be dropped.
            <table>
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Length limit</th>
                        <th>Description</th>
                    </tr>
                </thead>
            <tbody>
            <tr>
                <td><code>source</code> </td> <td> 0-100</td> <td> This will give source information. Like machine detail </td>
            </tr>
            <tr>
            <td> <code>event</code></td><td> 0-100</td>. <td>This will give event detail like auto_recharge or debit loop</td>
            </tr>
            <tr>
            <td><code>message</code></td> <td>0-1000</td>  <td>Can contain extra information.</td>
            </tr>
            </tbody>
            </table>

            </td>

        </tr>
    </tbody>
</table>

<h2 id="create-balance">Create Balance</h2>

<blockquote>
<p>HTTP Status Code: 201</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"balance_tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"postpaid"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3456.56</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topup_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
            </span><span class="nt">"threshold_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383249</span><span class="p">,</span><span class="w">
            </span><span class="nt">"modified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383290</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 200</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value validation failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 400</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Missing Field. 'amount' field is mandatory"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API creates an account balance</p>

<p><code class="prettyprint">PUT balanceservice/v1/balance/{account_identifier}/</code></p>

<h3 id="arguments">Arguments</h3>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>balance_tag (mandatory)</td>
            <td>Balance can be tagged. Preferably by prepaid or postpaid tags. Length Limit(1-50). Greater length will
            be trimmed
            </td>
        </tr>
        <tr>
            <td>amount</td>
            <td> Balance amount
            </td>
        </tr>
        <tr>
            <td>topup_amount</td>
            <td>once account balance goes below threshold limit. balance_topup event will be triggered containing this amount.
            Can not be negative.
            </td>
        </tr>
        <tr>
            <td>threshold_amount</td>
            <td>if balance goes below threshold amount event will be triggered for low balance. Can not be negative.
            </td>
        </tr>
    </tbody>
</table>

<h3 id="response-attributes">Response Attributes</h3>

<dl>
    <dt>balance_tag</dt>
    <dd>string
    <span>Type of balance.
    </dd>

    <dt>amount</dt>
    <dd>decimal
    <span>balance amount</span>
    </dd>

    <dt>status</dt>
    <dd>string
    <span>status of balance.
    </dd>

    <dt>created</dt>
    <dd>string
    <span>creation time of balance</span>
    </dd>

    <dt>modified</dt>
    <dd>string
    <span>modified time of balance</span>
    </dd>

    <dt>topup_amount</dt>
    <dd>decimal
    <span>topup amount</span>
    </dd>
    <dt>threshold_amount</dt>
    <dd>decimal
    <span>if balance goes below threshold amount event will be triggered for low balance</span>
    </dd>

</dl>

<h2 id="delete-balance">Delete Balance</h2>

<blockquote>
<p>HTTP Status Code: 204</p>

<p>HTTP Status Code: 400</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid account_identifier "</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API deletes an account balance</p>

<p><code class="prettyprint">DELETE balanceservice/v1/balance/{account_identifier}/</code></p>

<h2 id="update-balance-attributes">Update Balance Attributes</h2>

<blockquote>
<p>HTTP Status Code: 200</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2345"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"balance_tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prepaid"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3456.56</span><span class="p">,</span><span class="w">
            </span><span class="nt">"topup_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
            </span><span class="nt">"threshold_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
            </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383249</span><span class="p">,</span><span class="w">
            </span><span class="nt">"modified"</span><span class="p">:</span><span class="w"> </span><span class="mi">1486383290</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 200</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"threshold limit can not be negative"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>HTTP Status Code: 400</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid account_identifier "</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This API updates an balance object attributes</p>

<p><code class="prettyprint">PATCH balanceservice/v1/balance/{account_identifier}/</code></p>

<h3 id="arguments">Arguments</h3>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>topup_amount (optional)</td>
            <td>If included, balance_topup field will be overwritten by new value. Should not be negative
            </td>
        </tr>
        <tr>
            <td>threshold_amount (optional)</td>
            <td>Please include this field if it needs to be replaced. if balance goes below threshold amount event will be triggered for low balance
            </td>
        </tr>
        <tr>
            <td>status (optional)</td>
            <td>Please include this field if balance need to be suspended. Possible values of status could be <code>suspended</code>
            </td>
        </tr>
        <tr>
            <td>balance_tag (optional)</td>
            <td>Balance can be tagged. Preferably by prepaid or postpaid tags. Length Limit(1-50). Greater length will
            be trimmed
            </td>
        </tr>
        <tr>
            <td>amount (optional)</td>
            <td> Balance amount. Balance amount will be overwritten by new value. Please be careful while sending this parameter.
            </td>
        </tr>

    </tbody>
</table>

<h2 id="events">Events</h2>

<p>Multiple URLs can be configured. All  generated events will be notified on all of configured urls.
Events firing will be asynchronus and after 500ms the connection will be closed.</p>

<h3 id="event-description">Event Description</h3>

<table>
    <thead>
        <tr>
            <th>Event Type</th>
            <th>Scenario</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>balance_topup </td>
            <td> If <code>amount</code> goes below <code>threshold_amount</code> this event will be triggered.
            </td>
        </tr>
        <tr>
            <td>debit</td>
            <td> In case of balance debit this event will be triggered with event_status as <code>success</code> or <code>fail</code> depending if debit was success or failure
            </td>
        </tr>
        <tr>
            <td>credit</td>
            <td>In case of balance credit this event will be triggered with event_status as <code>success</code> or <code>fail</code> depending if credit was success or failure
            </td>
        </tr>
        <tr>
            <td>negative_balance </td>
            <td>This event will be triggered if balance amount becomes non positive.
            </td>
        </tr>

    </tbody>
</table>

<h3 id="arguments">Arguments</h3>

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>type (mandatory)</td>
            <td> Following event types will be delivered. <code>balance_topup</code>, <code>debit</code>, <code>credit</code>, <code>negative_balance</code>
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>status (optional)</td>
            <td> Event status can be <code>success</code> or <code>fail</code>. Field will only be sent for <code>debit</code>, <code>credit</code>.
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>balance </td>
            <td> balance object.
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>meta (optional)</td>
            <td>meta information gathered from the caller will be forwarded. This field will only be present if it has been sent by requester.
            Meta will be a dict with three fields.

            <table>
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Length limit</th>
                        <th>Description</th>
                    </tr>
                </thead>
            <tbody>
            <tr>
                <td><code>source</code> </td> <td> 0-100</td> <td> This will give source information. Like machine detail </td>
            </tr>
            <tr>
            <td> <code>event</code></td><td> 0-100</td>. <td>This will give event detail like auto_recharge or debit loop</td>
            </tr>
            <tr>
            <td><code>message</code></td> <td>0-1000</td>  <td>Can contain extra information.</td>
            </tr>
            </tbody>
            </table>
            </td>
        </tr>
    </tbody>
</table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="JSON Response">JSON Response</a>
          </div>
      </div>
    </div>
  </body>
</html>
